/**
 * ******************************************************************************
 * Copyright (c) 2025 Tom Busby
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0.
 *
 * This Source Code may also be made available under the following Secondary
 * Licenses when the conditions for such availability set forth in the Eclipse
 * Public License, v. 2.0 are satisfied: GNU General Public License, version 2
 * with the GNU Classpath Exception which is
 * available at https://www.gnu.org/software/classpath/license.html.
 *
 * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0
 * ******************************************************************************
 */

@use 'sass:math'

.didgeridoo
    $spacing: 20px
    $danger-color: #d63638
    $danger-color-soft: #f8d7da
    $success-color: #28a745
    $success-color-soft: #d4edda
    $mobile: " screen and (max-width: 782px)"
    $desktop: " screen and (min-width: 783px)"

    *, *::before, *::after
        box-sizing: border-box

    h1, h2, h3, h4, h5, h6
        margin: 0

    ul
        list-style-type: none
        padding: 0
        margin: 0

    li
        margin: 0

    .button-danger
        background-color: $danger-color
        border: 1px solid $danger-color
        color: #fff

        &:hover
            border: 1px solid $danger-color

    label
        white-space: nowrap

    input
        &[type="text"]
            min-height: 40px
            box-shadow: 0 0 0 transparent
            border-radius: 4px
            border: 1px solid #8c8f94
            color: #2c3338
            width: 100%

            @media #{$desktop}
                min-height: 30px

        &[type="checkbox"]
            // Make the check bigger
            transform: scale(2)
            transform-origin: left
            margin: 10px 0

    .ddoo
        &__container
            display: flex
            flex-flow: column
            max-width: 600px

        &__row-header
            display: flex
            flex-flow: row

        &__row
            display: flex
            flex-flow: row
            margin-bottom: $spacing
            align-items: center

            &--centered
                justify-content: center

            &--label
                margin-bottom: math.div($spacing, 2)

            &--short-spacing
                margin-bottom: math.div($spacing, 4)

            &--user-handle
                margin-bottom: 0

            &--handle-settings
                display: flex
                flex-flow: row
                justify-content: space-between

            &--success
                background: $success-color-soft
                color: $success-color
                padding: math.div($spacing, 2)
                margin-bottom: math.div($spacing, 2)
                display: flex
                flex-flow: row
                justify-content: space-between

                > *:not(:first-child)
                    margin-left: math.div($spacing, 2)

            &--error
                background: $danger-color-soft
                color: $danger-color
                padding: math.div($spacing, 2)
                margin-bottom: math.div($spacing, 2)
                display: flex
                flex-flow: row
                justify-content: space-between

                > *:not(:first-child)
                    margin-left: math.div($spacing, 2)

        &__sort
            display: flex
            flex-flow: column
            align-items: end

        &__button-close
            position: relative

            &::before
                transform: scale(1.5)

            &--success
                &::before
                    color: $success-color

            &--error
                &::before
                    color: $danger-color

    .user-table
        display: flex
        flex-flow: column
        width: 100%

        input
            @media #{$desktop}
                border-radius: 0

            &:disabled 
                background-color: #f8f9fa

        button
            @media #{$desktop}
                border-radius: 0

        &__label
            display: flex
            flex-flow: row
            justify-content: space-between
            align-items: center
            margin-bottom: math.div($spacing, 4)

            @media #{$desktop}
                display: none

        &__last-updated
            display: flex
            align-items: center
            justify-content: center

            @media #{$desktop}
                border-left: 1px solid rgb(140, 143, 148)

        &__row
            display: grid
            grid-template-columns: 1fr 80px
            grid-template-rows: auto

            @media #{$desktop}
                grid-template-columns: 1fr 1fr 1fr 80px
                grid-template-rows: 1fr

            &--header
                display: none
                
                @media #{$desktop}
                    display: grid

            &--error
                background: $danger-color-soft
                color: $danger-color

            @media #{$desktop}
                > * input:first-child
                    border-right: 0

                &:first-child > :first-child > *
                    border-top-left-radius: 4px

                &:first-child > :last-child > *
                    border-top-right-radius: 4px

                &:last-child > :first-child > *
                    border-bottom-left-radius: 4px

                &:last-child > :last-child > *
                    border-bottom-right-radius: 4px

        &__col
            position: relative
            display: flex
            flex-flow: column
            justify-content: center
            margin-bottom: math.div($spacing, 2)

            @media #{$desktop}
                margin-bottom: 0

            &--name, &--did
                grid-column: span 2

                @media #{$desktop}
                    grid-column: span 1

            &:hover
                .user-table__error-list
                    display: block

        &__body
            > *:not(:first-child)
                margin-top: math.div($spacing, 4)

            &--error
                border-color: $danger-color
                background: $danger-color-soft

        &__input
            &--error
                border-color: $danger-color
                background-color: $danger-color-soft

        &__error-list
            background: $danger-color-soft
            margin-bottom: math.div($spacing, 2)
            padding: math.div($spacing, 2)
            
            @media #{$desktop}
                top: 0
                left: 0
                right: 0
                position: absolute
                display: none
                padding: math.div($spacing, 2)
                transform: translateY(-100%)

                &:hover
                    display: block

    .modal
        &__open-button
            width: 20px
            height: 20px
            background-color: #f8f9fa
            border: 1px solid #8c8f94
            color: #2c3338
            text-align: center
            text-decoration: none
            display: inline-block
            cursor: pointer
            margin-left: math.div($spacing, 2)
            border-radius: 100%
            font-weight: bold

            &:hover
                background-color: #e9ecef

        &__box
            display: none
            position: fixed
            z-index: 9999
            left: 0
            top: 0
            width: 100%
            height: 100%
            overflow: auto

            &--open
                display: block

        &__content
            background-color: #fefefe
            margin: 15% auto
            padding: 20px
            border: 1px solid #888
            width: calc(100% - $spacing * 2)
            z-index: 2
            position: relative

            @media #{$desktop}
                max-width: 600px

        &__background
            background-color: rgba(0, 0, 0, 0.4)
            position: fixed
            z-index: 1
            left: 0
            top: 0
            width: 100%
            height: 100%

        &__close-button
            color: #aaa
            float: right
            font-size: 28px
            font-weight: bold

        &__close-button:hover,
        &__close-button:focus
            color: black
            text-decoration: none
            cursor: pointer

        &__header
            display: flex
            justify-content: space-between
            align-items: center
            margin-bottom: $spacing

        &__body
            margin-bottom: $spacing

        &__footer
            display: flex
            justify-content: flex-end
